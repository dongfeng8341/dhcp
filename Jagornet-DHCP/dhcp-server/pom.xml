<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>com.jagornet</groupId>
    <artifactId>dhcp-all</artifactId>
    <version>3.0.0-SNAPSHOT</version>
  </parent>

  <artifactId>dhcp-server</artifactId>
  
  <properties>
  	<jagornet.dhcp.version>3.0.0-SNAPSHOT</jagornet.dhcp.version>
  	<commons.cli.version>1.2</commons.cli.version>
  	<commons.dbcp2.version>2.1.1</commons.dbcp2.version>
  	<commons.io.version>2.5</commons.io.version>
  	<commons.pool2.version>2.4.2</commons.pool2.version>
  	<dnsjava.version>2.1.8</dnsjava.version>
  	<netty3.version>3.10.6.Final</netty3.version>
  	<netty4.version>4.1.28.Final</netty4.version>
  	<spring.version>4.3.6.RELEASE</spring.version>
  	<derby.version>10.13.1.1</derby.version>
  	<h2.version>1.4.193</h2.version>
  	<sqlite.jdbc.version>3.16.1</sqlite.jdbc.version>
  	<sqlite4java.version>1.0.392</sqlite4java.version>
  	<mongo.version>3.4.2</mongo.version>
  	<jedis.version>2.9.0</jedis.version>
  	<gson.version>2.8.4</gson.version>
  	<jersey.version>2.27</jersey.version>
  	<jaxb.version>2.2.11</jaxb.version>
  	<activation.version>1.1.1</activation.version>
  </properties>

  <dependencies>
  	<dependency>
  		<groupId>com.jagornet</groupId>
  		<artifactId>dhcp-core</artifactId>
  		<version>${jagornet.dhcp.version}</version>
  	</dependency>
	<dependency>
	    <groupId>commons-cli</groupId>
	    <artifactId>commons-cli</artifactId>
	    <version>${commons.cli.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.apache.commons</groupId>
	    <artifactId>commons-dbcp2</artifactId>
	    <version>${commons.dbcp2.version}</version>
	</dependency>
	<dependency>
	    <groupId>commons-io</groupId>
	    <artifactId>commons-io</artifactId>
	    <version>${commons.io.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.apache.commons</groupId>
	    <artifactId>commons-pool2</artifactId>
	    <version>${commons.pool2.version}</version>
	</dependency>
	<dependency>
	    <groupId>dnsjava</groupId>
	    <artifactId>dnsjava</artifactId>
	    <version>${dnsjava.version}</version>
	</dependency>
	<dependency>
	    <groupId>io.netty</groupId>
	    <artifactId>netty</artifactId>
	    <version>${netty3.version}</version>
	</dependency>
	<dependency>
	    <groupId>io.netty</groupId>
	    <artifactId>netty-all</artifactId>
	    <version>${netty4.version}</version>
	</dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>
	<dependency>
	    <groupId>org.apache.derby</groupId>
	    <artifactId>derby</artifactId>
	    <version>${derby.version}</version>
        <scope>runtime</scope>
	</dependency>
	<dependency>
	    <groupId>org.apache.derby</groupId>
	    <artifactId>derbyclient</artifactId>
	    <version>${derby.version}</version>
        <scope>runtime</scope>
	</dependency>
    <dependency>
        <groupId>com.h2database</groupId>
        <artifactId>h2</artifactId>
        <version>${h2.version}</version>
        <scope>runtime</scope>
    </dependency>
	<dependency>
	    <groupId>org.xerial</groupId>
	    <artifactId>sqlite-jdbc</artifactId>
	    <version>${sqlite.jdbc.version}</version>
        <scope>runtime</scope>
	</dependency>
	<dependency>
	    <groupId>com.almworks.sqlite4java</groupId>
	    <artifactId>sqlite4java</artifactId>
	    <version>${sqlite4java.version}</version>
	</dependency>
<!-- 
	<dependency>
	    <groupId>com.almworks.sqlite4java</groupId>
	    <artifactId>libsqlite4java-linux-amd64</artifactId>
	    <version>1.0.392</version>
        <scope>runtime</scope>
	</dependency>
	<dependency>
	    <groupId>com.almworks.sqlite4java</groupId>
	    <artifactId>libsqlite4java-linux-i386</artifactId>
	    <version>1.0.392</version>
        <scope>runtime</scope>
	</dependency>
	<dependency>
	    <groupId>com.almworks.sqlite4java</groupId>
	    <artifactId>libsqlite4java-osx</artifactId>
	    <version>1.0.392</version>
        <scope>runtime</scope>
	</dependency>
 -->
 	<!-- TODO: Add SqlLite4Java binaries for Windows -->
	<dependency>
	    <groupId>org.mongodb</groupId>
	    <artifactId>mongo-java-driver</artifactId>
	    <version>${mongo.version}</version>
	</dependency>
	<dependency>
	    <groupId>redis.clients</groupId>
	    <artifactId>jedis</artifactId>
	    <version>${jedis.version}</version>
	</dependency>
	<!-- 
	<dependency>
    	<groupId>redis</groupId>
    	<artifactId>johm</artifactId>
    	<version>0.6.7</version>
    	<type>jar</type>
	</dependency>
	 -->
  	<dependency>
  		<groupId>com.jagornet</groupId>
  		<artifactId>dhcp-core</artifactId>
  		<version>${jagornet.dhcp.version}</version>
		<type>test-jar</type>
		<scope>test</scope>
  	</dependency>
  	<dependency>
  		<groupId>com.google.code.gson</groupId>
  		<artifactId>gson</artifactId>
  		<version>${gson.version}</version>
  	</dependency>
	<dependency>
	    <groupId>org.glassfish.jersey.containers</groupId>
	    <artifactId>jersey-container-grizzly2-http</artifactId>
	    <version>${jersey.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.glassfish.jersey.containers</groupId>
	    <artifactId>jersey-container-netty-http</artifactId>
	    <version>${jersey.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.glassfish.jersey.core</groupId>
	    <artifactId>jersey-client</artifactId>
	    <version>${jersey.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.glassfish.jersey.inject</groupId>
	    <artifactId>jersey-hk2</artifactId>
	    <version>${jersey.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.glassfish.jersey.connectors</groupId>
	    <artifactId>jersey-apache-connector</artifactId>
	    <version>${jersey.version}</version>
	</dependency>
	<!-- JAXB and activation jars required for Java 11 -->
	<dependency>
	    <groupId>javax.xml.bind</groupId>
	    <artifactId>jaxb-api</artifactId>
	    <version>${jaxb.version}</version>
	</dependency>
	<dependency>
	    <groupId>com.sun.xml.bind</groupId>
	    <artifactId>jaxb-core</artifactId>
	    <version>${jaxb.version}</version>
	</dependency>
	<dependency>
	    <groupId>com.sun.xml.bind</groupId>
	    <artifactId>jaxb-impl</artifactId>
	    <version>${jaxb.version}</version>
	</dependency>
	<dependency>
	    <groupId>javax.activation</groupId>
	    <artifactId>activation</artifactId>
	    <version>${activation.version}</version>
	</dependency>
  </dependencies>

<!--   
  <profiles>
    <profile>
    <id>all-db</id>
-->
	<build>
        <plugins>
			<plugin>
			  <groupId>org.apache.maven.plugins</groupId>
			  <artifactId>maven-site-plugin</artifactId>
			  <version>3.7.1</version>
			</plugin>
			<plugin>
			  <groupId>org.apache.maven.plugins</groupId>
			  <artifactId>maven-project-info-reports-plugin</artifactId>
			  <version>3.0.0</version>
			</plugin>
	        <plugin>
	            <groupId>org.codehaus.mojo</groupId>
	            <artifactId>jaxb2-maven-plugin</artifactId>
	            <version>2.3.1</version>
	            <executions>
	                <execution>
	                	<phase>generate-sources</phase>
	                    <id>xjc</id>
	                    <goals>
	                        <goal>xjc</goal>
	                    </goals>
	                </execution>
	            </executions>
	            <configuration>
	            	<sources>
	            		<source>src/main/resources/dhcpserver.xsd</source>
	            	</sources>
	            	<xjbSources>
	            		<source>src/main/resources/dhcpserver.xjb</source>
	            	</xjbSources>
	                <!-- The package of your generated sources -->
	                <packageName>com.jagornet.dhcp.server.config.xml</packageName>
	            </configuration>
	        </plugin>

	        
<!-- Shade plugin creates an uber jar with dependencies

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>2.3</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                          <goal>shade</goal>
                        </goals>
                        <configuration>
- 
                          <minimizeJar>true</minimizeJar>
			              <filters>
			                <filter>
			                   <artifact>log4j:log4j</artifact>
			                   <includes>
			                       <include>**</include>
			                   </includes>
			                </filter>
			                <filter>
			                   <artifact>commons-logging:commons-logging</artifact>
			                   <includes>
			                       <include>**</include>
			                   </includes>
			                </filter>
			              </filters>
-
 						  <artifactSet>
 						    <excludes>
 						      <exclude>io.netty:netty-all</exclude>
 						    </excludes>
 						  </artifactSet>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
-->
		    <plugin>
		        <!-- NOTE: We don't need a groupId specification because the group is
		             org.apache.maven.plugins ...which is assumed by default.
	        	<groupId>org.apache.maven.plugins</groupId>
		         -->
		        <artifactId>maven-assembly-plugin</artifactId>
		        <version>3.1.0</version>
		        <configuration>
		          <!-- 
		          'bin' descriptorRef just creates server jar
		          'jar-with-dependencies' is an uber jar
		          <descriptorRefs>
		            <descriptorRef>bin</descriptorRef>
		            <descriptorRef>jar-with-dependencies</descriptorRef>
		          </descriptorRefs>
		           -->
		          <descriptors>
		            <descriptor>src/assembly/all-db-dist-assembly.xml</descriptor>
		            <descriptor>src/assembly/derby-dist-assembly.xml</descriptor>
		          </descriptors>
		        </configuration>
		        <executions>
		          <execution>
		            <id>make-assembly</id> <!-- this is used for inheritance merges -->
		            <phase>package</phase> <!-- bind to the packaging phase -->
		            <goals>
		              <goal>single</goal>
		            </goals>
		          </execution>
		        </executions>
		    </plugin>
	      	<plugin>
	        	<groupId>org.apache.maven.plugins</groupId>
	        	<artifactId>maven-surefire-plugin</artifactId>
	        	<version>2.22.1</version>
	        	<configuration>
			        <systemPropertyVariables>
			            <jagornet.dhcp.home>${project.basedir}</jagornet.dhcp.home>
			        </systemPropertyVariables>
					<additionalClasspathElements>
            			<additionalClasspathElement>${project.basedir}/config</additionalClasspathElement>
          			</additionalClasspathElements>
	        	</configuration>
               <executions>
                    <execution>
                        <phase>test</phase>
                    </execution>
               </executions>
	    	</plugin>
	    	
	    	<!-- TODO: remove this, superseded by assembly plugin, right? 
		    <plugin>
		        <groupId>org.apache.maven.plugins</groupId>
		        <artifactId>maven-dependency-plugin</artifactId>
		        <version>3.0.2</version>
		        <executions>
		          <execution>
		            <id>copy-dependencies</id>
		            <phase>package</phase>
		            <goals>
		              <goal>copy-dependencies</goal>
		            </goals>
		            <configuration>
		              <outputDirectory>target/lib</outputDirectory>
		              <overWriteReleases>false</overWriteReleases>
		              <overWriteSnapshots>false</overWriteSnapshots>
		              <overWriteIfNewer>true</overWriteIfNewer>
		            </configuration>
		          </execution>
		        </executions>
		    </plugin>
		    -->
        </plugins>
    </build>
	   
	<reporting>
	  <plugins>
	    <plugin>
	      <groupId>org.apache.maven.plugins</groupId>
	      <artifactId>maven-surefire-report-plugin</artifactId>
	      <version>2.22.1</version>
	    </plugin>
	  </plugins>
	</reporting>

<!-- 
    </profile>
    
    <profile>
    <id>derby</id>
	<build>
        <plugins>
	        <plugin>
	        	<groupId>org.apache.maven.plugins</groupId>
	            <artifactId>maven-compiler-plugin</artifactId>
	            <configuration>
	                <excludes>
	                	<exclude>com/jagornet/dhcp/netty4/*</exclude>
	                	<exclude>com/jagornet/dhcp/db/Mongo*</exclude>
	                	<exclude>com/jagornet/dhcp/db/Redis*</exclude>
	                	<exclude>com/jagornet/dhcp/db/Sqlite*</exclude>
	                </excludes>
	            </configuration>
	        </plugin>
	        <plugin>
	            <groupId>org.codehaus.mojo</groupId>
	            <artifactId>jaxb2-maven-plugin</artifactId>
	            <version>2.3.1</version>
	            <executions>
	                <execution>
	                	<phase>generate-sources</phase>
	                    <id>xjc</id>
	                    <goals>
	                        <goal>xjc</goal>
	                    </goals>
	                </execution>
	            </executions>
	            <configuration>
	            	<sources>
	            		<source>src/main/resources/dhcpserver.xsd</source>
	            	</sources>
	            	<xjbSources>
	            		<source>src/main/resources/dhcpserver.xjb</source>
	            	</xjbSources>
	                <packageName>com.jagornet.dhcp.server.config.xml</packageName>
	            </configuration>
	        </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>2.3</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                          <goal>shade</goal>
                        </goals>
                        <configuration>

                          <minimizeJar>true</minimizeJar>
			              <filters>
			                <filter>
			                   <artifact>log4j:log4j</artifact>
			                   <includes>
			                       <include>**</include>
			                   </includes>
			                </filter>
			                <filter>
			                   <artifact>commons-logging:commons-logging</artifact>
			                   <includes>
			                       <include>**</include>
			                   </includes>
			                </filter>
			                <filter>
			                   <artifact>org.springframework:spring-beans</artifact>
			                   <includes>
			                       <include>**</include>
			                   </includes>
			                </filter>
			                <filter>
			                   <artifact>org.springframework:spring-core</artifact>
			                   <includes>
			                       <include>**</include>
			                   </includes>
			                </filter>
			                <filter>
			                   <artifact>org.apache.commons:commons-dbcp2</artifact>
			                   <includes>
			                       <include>**</include>
			                   </includes>
			                </filter>
			                <filter>
			                   <artifact>org.apache.commons:commons-pool2</artifact>
			                   <includes>
			                       <include>**</include>
			                   </includes>
			                </filter>
			                <filter>
			                   <artifact>org.apache.derby</artifact>
			                   <includes>
			                       <include>**</include>
			                   </includes>
			                </filter>
			              </filters>

 						  <artifactSet>
 						    <excludes>
 						      <exclude>io.netty:netty-all</exclude>
 						      <exclude>com.h2database:h2</exclude>
 						      <exclude>org.xerial:sqlite-jdbc</exclude>
 						      <exclude>com.almworks.sqlite4java:sqlite4java</exclude>
 						      <exclude>org.mongodb:mongo-java-driver</exclude>
 						      <exclude>redis.clients:jedis</exclude>
 						    </excludes>
 						  </artifactSet>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
    </profile>
  </profiles>   
-->
 
</project>